CREATE OR REPLACE PROCEDURE Add1(
 A Number,
 B Number,
 C Number)
 IS
 Result Number(3);
 BEGIN
 Result:= A+B+C;
 DBMS_output.put_line('Result is ' || Result);
 END;


CREATE OR REPLACE PROCEDURE CREATEBANKACCOUNT1(
  name char,
  actype char,
  city char,
  abc char)
  IS
  BEGIN
  INSERT INTO BANK VALUES((SELECT UPPER(SUBSTR(ACTYPE,1,1)) || UPPER(SUBSTR(CITY,1,1)) || LPAD(NVL(MAX(SUBSTR(ACCNO,3,3)) + 1,1),3,'0') FROM BANK 
  WHERE SUBSTR(accno,1,1) = UPPER(SUBSTR(actype,1,1))), 
  NAME, CITY);
  end;

CREATE OR REPLACE PROCEDURE TESCO_CATEGORY(
  cat char)
  IS
  newCID number(3);
  BEGIN
  SELECT nvl(max(cid),0) +1 into newCID from CATEGORY;
  INSERT INTO CATEGORY VALUES(newCID, cat);
  end;
  /

CREATE OR REPLACE PROCEDURE TESCO_ENTER(
cat char,
sub char)
IS
currentCountCAT number(3);
currentCountSUB number(3);
catDesc char(30);
maxSID number(3);
maxCID
currentCID number(3);
incrementedSID number(3);
incrementedCID number(3);

BEGIN
SELECT count(*) into currentCountCAT from CATEGORY;
IF currentCountCAT = 0 THEN
INSERT INTO CATEGORY VALUES(1, cat);
INSERT INTO SUBCATEGORY VALUES(1, 1, sub);

ELSE IF

SELECT CATEGORY.DESCRIPTION into catDesc from CATEGORY;
SELECT CATEGORY.CID INTO currentCID FROM CATEGORY WHERE CATEGORY.DESCRIPTION = cat;
SELECT MAX(SID) + 1 INTO incrementedSID FROM SUBCATEGORY GROUP BY CID;


IF cat = catDesc THEN
INSERT INTO SUBCATEGORY VALUES(currentCID, incrementedSID, sub);


ELSE

SELECT MAX(CATEGORY.CID) + 1 INTO incrementedCID FROM CATEGORY;
INSERT INTO CATEGORY VALUES(incrementedCID, sub);
INSERT INTO SUBCATEGORY VALUES(incrementedCID,,sub);

END IF;
END;

====================================================================
CREATE OR REPLACE PROCEDURE TESCO_PRODUCT(
CATEGORY CHAR,
SUBCATEGORY CHAR)
IS
COUNTER NUMBER(3);
NEW_SID NUMBER(3);
NEW_PID NUMBER(3);

BEGIN

SELECT COUNT(*) INTO COUNTER FROM CATEGORY WHERE DESCRIPTION = CATEGORY;
IF COUNTER = 0
THEN
SELECT NVL(MAX(CID)+1,1) INTO NEW_CID FROM CATEGORY;
INSERT INTO CATEGORY VALUES(NEW_CID, SUBCATEGORY);


=====================================================================
CREATE OR REPLACE PROCEDURE TESCO_PRODUCT_RIGHT(
CAT CHAR,
SUB CHAR)
IS
NEW_CID NUMBER(3);
NEW_SID NUMBER(3);

BEGIN

SELECT NVL(MAX(CID),0) INTO NEW_CID FROM CATEGORY WHERE DESCRIPTION = CAT;
IF NEW_CID = 0
THEN
SELECT NVL(MAX(CID),0) + 1 INTO NEW_CID FROM CATEGORY;
INSERT INTO CATEGORY VALUES(NEW_CID, CAT);
END IF;

SELECT NVL(MAX(SID),0) +1 INTO NEW_SID FROM SUBCATEGORY WHERE CID = NEW_CID;
INSERT INTO SUBCATEGORY VALUES(NEW_CID, NEW_SID, SUB);
END;


